import{I as L,J as R,o,d,K as m,L as q,g as N,r as C,M as y,F as v,D as T,m as x,N as I,q as B,s as M,c as h,a as $,O as g,f as b,w as P,j as f,b as w,P as j,e as V}from"./index-qP9tmyiK.js";function Y(e){return L({url:"/menu/all",method:"get",params:e})}const E={__name:"TableColumn",props:{column:{type:Object,default(){return{}}}},setup(e){const s=R(),l=a=>N(v,null,[a.isShow&&N(C("el-table-column"),y(a,{align:a.align??"center"}),{default:c=>{if(a.render)return a.render(c);if(s[a.prop])return s[a.prop](c)}})]);return(a,c)=>(o(),d(l,m(q(e.column)),null,16))}},K={__name:"Pagination",props:{pageable:{type:Object,default:()=>({pageNum:1,pageSize:10,total:0})},handleSizeChange:{type:Function,default:()=>{}},handleCurrentChange:{type:Function,default:()=>{}}},setup(e){return(s,l)=>{const a=C("el-pagination");return o(),d(a,{background:!0,"current-page":e.pageable.pageNum,"page-size":e.pageable.pageSize,"page-sizes":[10,25,50,100],total:e.pageable.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])}}},H=(e,s,l,a,c)=>{const t=T({tableData:[],pageable:{pageNum:1,pageSize:10,total:0},searchParam:{},searchInitParam:{},totalParam:{}}),z=x({get:()=>(t.pageable,{pageNum:t.pageable.pageNum,pageSize:t.pageable.pageSize}),set:n=>{}}),p=async()=>{if(e)try{Object.assign(t.totalParam,s,l?z.value:{}),z.value;let{data:n}=await e({...t.searchInitParam,...t.totalParam});a&&(n=a(n)),t.tableData=l?n.rows:n,l&&(t.pageable.total=n.total)}catch{}},S=async()=>{t.pageable.pageNum=1,await p()},_=n=>{t.pageable.pageSize=n,t.pageable.pageNum=1,p()},k=n=>{t.pageable.pageNum=n,t.pageable,p()};return{...I(t),getTableList:p,search:S,handleSizeChange:_,handleCurrentChange:k}},J={class:"card table-main"},G={class:"table-header"},Q={class:"header-button-lf"},U={key:0,class:"header-button-ri"},Z={__name:"index",props:{columns:{type:Array,default(){return[]}},data:{type:Array,default:null},requestApi:{type:Function,default(){return()=>{}}},requestAuto:{type:Boolean,default:!1},dataCallback:{type:Function,default:null},pagination:{type:Boolean,default:!1},initParam:{type:Object,default(){return{}}},border:{type:Boolean,default:!1},toolButton:{type:Boolean,default:!1},rowKey:{type:String,default:"id"},searchCol:{type:Number,default:1}},setup(e,{expose:s}){const l=e,{tableData:a,pageable:c,searchParam:t,searchInitParam:z,getTableList:p,search:S,handleSizeChange:_,handleCurrentChange:k}=H(l.requestApi,l.initParam,l.pagination,l.dataCallback),n=B();M(()=>{l.requestAuto&&p()});const A=B(l.columns);return s({search:S,tableRef:n}),(u,W)=>{const F=C("el-table-column"),O=C("el-table");return o(),h("div",J,[$("div",G,[$("div",Q,[g(u.$slots,"tableHeader")]),e.toolButton?(o(),h("div",U,[g(u.$slots,"toolButton")])):b("",!0)]),N(O,{ref_key:"tableRef",ref:n,data:e.data??f(a),border:e.border},{default:P(()=>[g(u.$slots,"default"),(o(!0),h(v,null,w(A.value,r=>(o(),h(v,{key:r},[r.type&&["selection","index","expand"].includes(r.type)?(o(),d(F,y({key:0},r,{align:r.align??"center"}),j({_:2},[r.type==="expand"?{name:"default",fn:P(i=>[r.render?(o(),d(V(r.render),m(y({key:0},i)),null,16)):g(u.$slots,r.type,m(y({key:1},i)))]),key:"0"}:void 0]),1040,["align"])):b("",!0),!r.type&&r.prop&&r.isShow?(o(),d(E,{key:1,column:r},j({_:2},[w(Object.keys(u.$slots),i=>({name:i,fn:P(D=>[g(u.$slots,i,m(q(D)))])}))]),1032,["column"])):b("",!0)],64))),128))]),_:3},8,["data","border"]),g(u.$slots,"pagination",{},()=>[e.pagination?(o(),d(K,{key:0,pageable:f(c),"handle-size-change":f(_),"handle-current-change":f(k)},null,8,["pageable","handle-size-change","handle-current-change"])):b("",!0)])])}}};export{Z as _,Y as g};
